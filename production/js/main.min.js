var ffApp={};ffApp.filmKey="9c9b86feea5ad58203255b8135180674",ffApp.foodId="785ab478",ffApp.foodKey="8711f5eca962c73014bb9e6209d04652",ffApp.flavor="",ffApp.course="Main Dishes";var finalResults=[];ffApp.init=function(a){$("#searchFilm").on("submit",function(){$("#searchBar").val("")}),ffApp.getID(a)},ffApp.getID=function(a){$.ajax({url:"http://api.themoviedb.org/3/search/movie",type:"GET",data:{api_key:ffApp.filmKey,query:a},dataType:"json",success:function(a){var b=a.results[0].id;ffApp.getGenre(b)}})},ffApp.getGenre=function(a){$.ajax({url:"http://api.themoviedb.org/3/movie/"+a,type:"GET",data:{api_key:ffApp.filmKey},dataType:"jsonp",success:function(a){var b=a.genres[0].id;console.log(b),ffApp.flavorByGenre(b)}})},ffApp.flavorByGenre=function(a){28===a||12===a||878===a||14===a?ffApp.flavor="&flavor.salty.min=0.66&flavor.meaty.min=0.66&flavor.piquant.min=0.5":1115===a||37===a||9805===a||10758===a||10757===a?ffApp.flavor="&flavor.salty.min=0.8&flavor.meaty.min=0.8&flavor.piquant.min=0.66":10751===a||16===a||10595===a?ffApp.flavor="&flavor.sweet.min=0.5&flavor.salty.min=0.5&flavor.meaty.min=0.3&flavor.bitter.max=0.34":10749===a||18===a?ffApp.flavor="&flavor.sweet.min=0.5&flavor.salty.min=0.3&flavor.meaty.min=0.3&flavor.bitter.max=0.5&flavor.sour.min=0.33":27===a||53===a||9648===a||10748===a||105===a||80===a||10753===a?ffApp.flavor="&flavor.salty.min=0.5&flavor.piquant.min=0.5":36===a||10752===a?ffApp.flavor="&flavor.sweet.max=0.5&flavor.salty.min=0.5&flavor.bitter.max=0.66":(99===a||10755===a)&&(ffApp.flavor="&flavor.sweet.min=0.5&flavor.bitter.min=0.5"),ffApp.searchRecipe()},ffApp.searchRecipe=function(){$.ajax({url:"http://api.yummly.com/v1/api/recipes?allowedCourse[]=course^course-"+ffApp.course+ffApp.flavor,type:"GET",data:{_app_id:ffApp.foodId,_app_key:ffApp.foodKey,maxResult:300,rating:5},dataType:"jsonp",success:function(a){function b(a){return Math.floor(Math.random()*a)}function c(){return e[b(e.length)]}for(var d=a.matches,e=d,f=0;3>f;f=f){var g=c();console.log(g),g.smallImageUrls?(f++,finalResults.push(g)):console.log("no image")}ffApp.displayRecipe(finalResults)}})},ffApp.displayRecipe=function(a){$.each(a,function(a,b){var c=$("<img>").attr("src",b.smallImageUrls[0].replace("=s90","")),d=$("<p>").text(b.recipeName),e=$("<a>").attr("href","http://www.yummly.com/recipe/"+b.id).append(c,d),f=$("<figure>").addClass("recipeContainer").html(e);$("#recipe").append(f)})},$(function(){$("#searchButton").on("click",function(a){a.preventDefault(),$("header").slideUp("easeInOut"),finalResults=[],$("#recipe").empty();var b=$("#searchBar").val();ffApp.init(b),$(this).text("ENJOY! OR TRY SOMETHING ELSE")}),$("#course").on("change",function(){ffApp.course=$(this).val()})});var ffApp={};ffApp.filmKey="9c9b86feea5ad58203255b8135180674",ffApp.foodId="785ab478",ffApp.foodKey="8711f5eca962c73014bb9e6209d04652",ffApp.flavor="",ffApp.course="Main Dishes";var finalResults=[];ffApp.init=function(a){$("#searchFilm").on("submit",function(){$("#searchBar").val("")}),ffApp.getID(a)},ffApp.getID=function(a){$.ajax({url:"http://api.themoviedb.org/3/search/movie",type:"GET",data:{api_key:ffApp.filmKey,query:a},dataType:"json",success:function(a){var b=a.results[0].id;ffApp.getGenre(b)}})},ffApp.getGenre=function(a){$.ajax({url:"http://api.themoviedb.org/3/movie/"+a,type:"GET",data:{api_key:ffApp.filmKey},dataType:"jsonp",success:function(a){var b=a.genres[0].id;console.log(b),ffApp.flavorByGenre(b)}})},ffApp.flavorByGenre=function(a){28===a||12===a||878===a||14===a?ffApp.flavor="&flavor.salty.min=0.66&flavor.meaty.min=0.66&flavor.piquant.min=0.5":1115===a||37===a||9805===a||10758===a||10757===a?ffApp.flavor="&flavor.salty.min=0.8&flavor.meaty.min=0.8&flavor.piquant.min=0.66":10751===a||16===a||10595===a?ffApp.flavor="&flavor.sweet.min=0.5&flavor.salty.min=0.5&flavor.meaty.min=0.3&flavor.bitter.max=0.34":10749===a||18===a?ffApp.flavor="&flavor.sweet.min=0.5&flavor.salty.min=0.3&flavor.meaty.min=0.3&flavor.bitter.max=0.5&flavor.sour.min=0.33":27===a||53===a||9648===a||10748===a||105===a||80===a||10753===a?ffApp.flavor="&flavor.salty.min=0.5&flavor.piquant.min=0.5":36===a||10752===a?ffApp.flavor="&flavor.sweet.max=0.5&flavor.salty.min=0.5&flavor.bitter.max=0.66":(99===a||10755===a)&&(ffApp.flavor="&flavor.sweet.min=0.5&flavor.bitter.min=0.5"),ffApp.searchRecipe()},ffApp.searchRecipe=function(){$.ajax({url:"http://api.yummly.com/v1/api/recipes?allowedCourse[]=course^course-"+ffApp.course+ffApp.flavor,type:"GET",data:{_app_id:ffApp.foodId,_app_key:ffApp.foodKey,maxResult:300,rating:5},dataType:"jsonp",success:function(a){function b(a){return Math.floor(Math.random()*a)}function c(){return e[b(e.length)]}for(var d=a.matches,e=d,f=0;3>f;f=f){var g=c();console.log(g),g.smallImageUrls?(f++,finalResults.push(g)):console.log("no image")}ffApp.displayRecipe(finalResults)}})},ffApp.displayRecipe=function(a){$.each(a,function(a,b){var c=$("<img>").attr("src",b.smallImageUrls[0].replace("=s90","")),d=$("<p>").text(b.recipeName),e=$("<a>").attr("href","http://www.yummly.com/recipe/"+b.id).append(c,d),f=$("<figure>").addClass("recipeContainer").html(e);$("#recipe").append(f)})},$(function(){$("#searchButton").on("click",function(a){a.preventDefault(),finalResults=[],$("#recipe").empty();var b=$("#searchBar").val();ffApp.init(b),$(this).text("ENJOY! OR TRY SOMETHING ELSE")}),$("#course").on("change",function(){ffApp.course=$(this).val()})});